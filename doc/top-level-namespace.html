<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Top Level Namespace
  
    &mdash; Documentation by YARD 0.9.26
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/custom.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo;
    
    
    <span class="title">Top Level Namespace</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Top Level Namespace
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></dd>
  </dl>
  
  

  

  
</div>

<h2>Defined Under Namespace</h2>
<p class="children">
  
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span>
    
  
    
  
</p>







  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__-instance_method" title="#GET / (instance method)">#<strong>GET /</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Display login form.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__admin-instance_method" title="#GET /admin (instance method)">#<strong>GET /admin</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Display admin page.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__movies-instance_method" title="#GET /movies (instance method)">#<strong>GET /movies</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Displays Main page.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__movies__id_edit-instance_method" title="#GET /movies/:id/edit (instance method)">#<strong>GET /movies/:id/edit</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Displays edit movies form.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__movies_new-instance_method" title="#GET /movies/new (instance method)">#<strong>GET /movies/new</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Dispaly create movie form.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__reviews__id_edit-instance_method" title="#GET /reviews/:id/edit (instance method)">#<strong>GET /reviews/:id/edit</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Displays edit reviews form.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__reviews__id_new-instance_method" title="#GET /reviews/:id/new (instance method)">#<strong>GET /reviews/:id/new</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Displays review form.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__showregister-instance_method" title="#GET /showregister (instance method)">#<strong>GET /showregister</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Display register form.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__users-instance_method" title="#GET /users (instance method)">#<strong>GET /users</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Display user page.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__users__id_edit-instance_method" title="#GET /users/:id/edit (instance method)">#<strong>GET /users/:id/edit</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Displays edit user form.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__genres_show-instance_method" title="#POST /genres/show (instance method)">#<strong>POST /genres/show</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Display a genre.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__login-instance_method" title="#POST /login (instance method)">#<strong>POST /login</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Attemps login and updates session.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__movie_new-instance_method" title="#POST /movie/new (instance method)">#<strong>POST /movie/new</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates movie.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__movies__id_delete-instance_method" title="#POST /movies/:id/delete (instance method)">#<strong>POST /movies/:id/delete</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>delete existing movie and redirects to user.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__movies__id_edit-instance_method" title="#POST /movies/:id/edit (instance method)">#<strong>POST /movies/:id/edit</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Edits movie redirecting to users.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__reviews-instance_method" title="#POST /reviews (instance method)">#<strong>POST /reviews</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creats review.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__reviews__id_delete-instance_method" title="#POST /reviews/:id/delete (instance method)">#<strong>POST /reviews/:id/delete</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>delete existing review and redirects to user.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__reviews__id_edit-instance_method" title="#POST /reviews/:id/edit (instance method)">#<strong>POST /reviews/:id/edit</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Edits review and redirects to user.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__users__id_delete-instance_method" title="#POST /users/:id/delete (instance method)">#<strong>POST /users/:id/delete</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>delete existing user and redirects to login or if admin to admin panel.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__users__id_edit-instance_method" title="#POST /users/:id/edit (instance method)">#<strong>POST /users/:id/edit</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Edits user and redirects to user.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__users_new-instance_method" title="#POST /users/new (instance method)">#<strong>POST /users/new</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates a new user.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Model.html#add_genres_to_movie-instance_method" title="Model#add_genres_to_movie (method)">#add_genres_to_movie</a></span>, <span class='object_link'><a href="Model.html#add_movie-instance_method" title="Model#add_movie (method)">#add_movie</a></span>, <span class='object_link'><a href="Model.html#calculate_recent_attemps-instance_method" title="Model#calculate_recent_attemps (method)">#calculate_recent_attemps</a></span>, <span class='object_link'><a href="Model.html#cooldown_timer-instance_method" title="Model#cooldown_timer (method)">#cooldown_timer</a></span>, <span class='object_link'><a href="Model.html#create_review-instance_method" title="Model#create_review (method)">#create_review</a></span>, <span class='object_link'><a href="Model.html#create_user-instance_method" title="Model#create_user (method)">#create_user</a></span>, <span class='object_link'><a href="Model.html#db_conect-instance_method" title="Model#db_conect (method)">#db_conect</a></span>, <span class='object_link'><a href="Model.html#db_conect_without_hash-instance_method" title="Model#db_conect_without_hash (method)">#db_conect_without_hash</a></span>, <span class='object_link'><a href="Model.html#delete_movie-instance_method" title="Model#delete_movie (method)">#delete_movie</a></span>, <span class='object_link'><a href="Model.html#delete_movie_img-instance_method" title="Model#delete_movie_img (method)">#delete_movie_img</a></span>, <span class='object_link'><a href="Model.html#delete_review-instance_method" title="Model#delete_review (method)">#delete_review</a></span>, <span class='object_link'><a href="Model.html#delete_user-instance_method" title="Model#delete_user (method)">#delete_user</a></span>, <span class='object_link'><a href="Model.html#edit_genres_to_movie-instance_method" title="Model#edit_genres_to_movie (method)">#edit_genres_to_movie</a></span>, <span class='object_link'><a href="Model.html#genres_that_are_checked-instance_method" title="Model#genres_that_are_checked (method)">#genres_that_are_checked</a></span>, <span class='object_link'><a href="Model.html#get_admin_info_from_user-instance_method" title="Model#get_admin_info_from_user (method)">#get_admin_info_from_user</a></span>, <span class='object_link'><a href="Model.html#get_all_review_data-instance_method" title="Model#get_all_review_data (method)">#get_all_review_data</a></span>, <span class='object_link'><a href="Model.html#get_all_reviewed_movie_data-instance_method" title="Model#get_all_reviewed_movie_data (method)">#get_all_reviewed_movie_data</a></span>, <span class='object_link'><a href="Model.html#get_all_user_data-instance_method" title="Model#get_all_user_data (method)">#get_all_user_data</a></span>, <span class='object_link'><a href="Model.html#get_attemps-instance_method" title="Model#get_attemps (method)">#get_attemps</a></span>, <span class='object_link'><a href="Model.html#get_genre_name_from_genre_id-instance_method" title="Model#get_genre_name_from_genre_id (method)">#get_genre_name_from_genre_id</a></span>, <span class='object_link'><a href="Model.html#get_genres-instance_method" title="Model#get_genres (method)">#get_genres</a></span>, <span class='object_link'><a href="Model.html#get_info_user-instance_method" title="Model#get_info_user (method)">#get_info_user</a></span>, <span class='object_link'><a href="Model.html#get_movieid_from_user_id_and_movie_name-instance_method" title="Model#get_movieid_from_user_id_and_movie_name (method)">#get_movieid_from_user_id_and_movie_name</a></span>, <span class='object_link'><a href="Model.html#get_movies_with_genre-instance_method" title="Model#get_movies_with_genre (method)">#get_movies_with_genre</a></span>, <span class='object_link'><a href="Model.html#get_user_data-instance_method" title="Model#get_user_data (method)">#get_user_data</a></span>, <span class='object_link'><a href="Model.html#get_user_movie_data-instance_method" title="Model#get_user_movie_data (method)">#get_user_movie_data</a></span>, <span class='object_link'><a href="Model.html#get_user_review_data-instance_method" title="Model#get_user_review_data (method)">#get_user_review_data</a></span>, <span class='object_link'><a href="Model.html#get_userid_from_movie-instance_method" title="Model#get_userid_from_movie (method)">#get_userid_from_movie</a></span>, <span class='object_link'><a href="Model.html#get_userid_from_review-instance_method" title="Model#get_userid_from_review (method)">#get_userid_from_review</a></span>, <span class='object_link'><a href="Model.html#getreviewed_movie_data-instance_method" title="Model#getreviewed_movie_data (method)">#getreviewed_movie_data</a></span>, <span class='object_link'><a href="Model.html#id_from_user-instance_method" title="Model#id_from_user (method)">#id_from_user</a></span>, <span class='object_link'><a href="Model.html#medel_rating-instance_method" title="Model#medel_rating (method)">#medel_rating</a></span>, <span class='object_link'><a href="Model.html#movies_with_genre-instance_method" title="Model#movies_with_genre (method)">#movies_with_genre</a></span>, <span class='object_link'><a href="Model.html#password_check-instance_method" title="Model#password_check (method)">#password_check</a></span>, <span class='object_link'><a href="Model.html#review_movie-instance_method" title="Model#review_movie (method)">#review_movie</a></span>, <span class='object_link'><a href="Model.html#search_file_ending-instance_method" title="Model#search_file_ending (method)">#search_file_ending</a></span>, <span class='object_link'><a href="Model.html#specific_movie-instance_method" title="Model#specific_movie (method)">#specific_movie</a></span>, <span class='object_link'><a href="Model.html#time_allfail_user_login-instance_method" title="Model#time_allfail_user_login (method)">#time_allfail_user_login</a></span>, <span class='object_link'><a href="Model.html#update_dbpath-instance_method" title="Model#update_dbpath (method)">#update_dbpath</a></span>, <span class='object_link'><a href="Model.html#update_movie-instance_method" title="Model#update_movie (method)">#update_movie</a></span>, <span class='object_link'><a href="Model.html#update_review-instance_method" title="Model#update_review (method)">#update_review</a></span>, <span class='object_link'><a href="Model.html#update_user-instance_method" title="Model#update_user (method)">#update_user</a></span>, <span class='object_link'><a href="Model.html#user_and_desc-instance_method" title="Model#user_and_desc (method)">#user_and_desc</a></span></p>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="GET__-instance_method">
  
    #<strong>GET /</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Display login form</p>


  </div>
</div>
<div class="tags">
  



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


128
129
130</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 128</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;users/login&quot;</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__admin-instance_method">
  
    #<strong>GET /admin</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Display admin page</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>temp,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Movie id</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>modelmodel#get_all_user_data</li>
    
      <li>modelmodel#get_all_review_data</li>
    
      <li>modelmodel#get_all_reviewd_movie_data</li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


346
347
348
349
350
351
352
353
354
355
356
357
358
359
360</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 346</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/admin</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>

  <span class='id identifier rubyid_all_user_data'>all_user_data</span> <span class='op'>=</span> <span class='id identifier rubyid_get_all_user_data'><span class='object_link'><a href="Model.html#get_all_user_data-instance_method" title="Model#get_all_user_data (method)">get_all_user_data</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_all_review_data'>all_review_data</span> <span class='op'>=</span> <span class='id identifier rubyid_get_all_review_data'><span class='object_link'><a href="Model.html#get_all_review_data-instance_method" title="Model#get_all_review_data (method)">get_all_review_data</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>


  <span class='comment'>#Hämtar data om filmerna som userna har gjort en review på
</span>  <span class='id identifier rubyid_reviewed_movie_data'>reviewed_movie_data</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_all_review_data'>all_review_data</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_rev'>rev</span><span class='op'>|</span>
    <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='id identifier rubyid_rev'>rev</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>MovieId</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_reviewed_movie_data'>reviewed_movie_data</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_get_all_reviewed_movie_data'><span class='object_link'><a href="Model.html#get_all_reviewed_movie_data-instance_method" title="Model#get_all_reviewed_movie_data (method)">get_all_reviewed_movie_data</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_temp'>temp</span><span class='rparen'>)</span>

  <span class='kw'>end</span> 
  <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:admin</span><span class='comma'>,</span> <span class='label'>locals:</span><span class='lbrace'>{</span><span class='label'>info:</span><span class='id identifier rubyid_all_user_data'>all_user_data</span><span class='comma'>,</span> <span class='label'>movie_review:</span><span class='id identifier rubyid_reviewed_movie_data'>reviewed_movie_data</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__movies-instance_method">
  
    #<strong>GET /movies</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Displays Main page</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>userid,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>User id</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>modelmodel#medel_rating</li>
    
      <li>modelmodel#get_user_review_data</li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


274
275
276
277
278
279
280</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 274</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/movies</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_userid'>userid</span> <span class='op'>=</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
  <span class='id identifier rubyid_rating'>rating</span> <span class='op'>=</span> <span class='id identifier rubyid_medel_rating'><span class='object_link'><a href="Model.html#medel_rating-instance_method" title="Model#medel_rating (method)">medel_rating</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_user_reviews'>user_reviews</span> <span class='op'>=</span> <span class='id identifier rubyid_get_user_review_data'><span class='object_link'><a href="Model.html#get_user_review_data-instance_method" title="Model#get_user_review_data (method)">get_user_review_data</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_userid'>userid</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;movies/index&quot;</span><span class='comma'>,</span> <span class='label'>locals:</span><span class='lbrace'>{</span><span class='label'>review:</span><span class='id identifier rubyid_user_reviews'>user_reviews</span><span class='rbrace'>}</span><span class='rparen'>)</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__movies__id_edit-instance_method">
  
    #<strong>GET /movies/:id/edit</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Displays edit movies form</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>:id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Movie id</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>modelmodel#specific_movie</li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


469
470
471
472
473</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 469</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/movies/:id/edit</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_specific_movie'><span class='object_link'><a href="Model.html#specific_movie-instance_method" title="Model#specific_movie (method)">specific_movie</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;movies/edit&quot;</span><span class='comma'>,</span><span class='label'>locals:</span><span class='lbrace'>{</span><span class='label'>result:</span><span class='id identifier rubyid_result'>result</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__movies_new-instance_method">
  
    #<strong>GET /movies/new</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Dispaly create movie form</p>


  </div>
</div>
<div class="tags">
  



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


284
285
286
287</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 284</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/movies/new</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>

  <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;movies/new&quot;</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__reviews__id_edit-instance_method">
  
    #<strong>GET /reviews/:id/edit</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Displays edit reviews form</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>:id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Review id</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>modelmodel#review_movie</li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


493
494
495
496
497</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 493</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/reviews/:id/edit</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_review_movie'><span class='object_link'><a href="Model.html#review_movie-instance_method" title="Model#review_movie (method)">review_movie</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;reviews/edit&quot;</span><span class='comma'>,</span><span class='label'>locals:</span><span class='lbrace'>{</span><span class='label'>result:</span><span class='id identifier rubyid_result'>result</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__reviews__id_new-instance_method">
  
    #<strong>GET /reviews/:id/new</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Displays review form</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>:id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>movie id</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>modelmodel#specific_movie</li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


456
457
458
459
460
461</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 456</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/reviews/:id/new</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
  <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:movieId</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_id'>id</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_specific_movie'><span class='object_link'><a href="Model.html#specific_movie-instance_method" title="Model#specific_movie (method)">specific_movie</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;reviews/new&quot;</span><span class='comma'>,</span><span class='label'>locals:</span><span class='lbrace'>{</span><span class='label'>movie:</span><span class='id identifier rubyid_result'>result</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__showregister-instance_method">
  
    #<strong>GET /showregister</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Display register form</p>


  </div>
</div>
<div class="tags">
  



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


134
135
136
137</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 134</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/showregister</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:register</span><span class='rparen'>)</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__users-instance_method">
  
    #<strong>GET /users</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Display user page</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>userid,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>User id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>temp,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Movie id</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>modelmodel#get_user_data</li>
    
      <li>modelmodel#get_user_movie_data</li>
    
      <li>modelmodel#get_user_review_data</li>
    
      <li>modelmodel#getreviewed_movie_data</li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 204</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>

  <span class='id identifier rubyid_userid'>userid</span> <span class='op'>=</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>

  <span class='id identifier rubyid_user_data'>user_data</span> <span class='op'>=</span> <span class='id identifier rubyid_get_user_data'><span class='object_link'><a href="Model.html#get_user_data-instance_method" title="Model#get_user_data (method)">get_user_data</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_userid'>userid</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_movie_data'>movie_data</span> <span class='op'>=</span> <span class='id identifier rubyid_get_user_movie_data'><span class='object_link'><a href="Model.html#get_user_movie_data-instance_method" title="Model#get_user_movie_data (method)">get_user_movie_data</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_userid'>userid</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_review_data'>review_data</span> <span class='op'>=</span> <span class='id identifier rubyid_get_user_review_data'><span class='object_link'><a href="Model.html#get_user_review_data-instance_method" title="Model#get_user_review_data (method)">get_user_review_data</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_userid'>userid</span><span class='rparen'>)</span>
  
  
  <span class='comment'>#Hämtar data om filmerna som userna har gjort en review på
</span>  <span class='id identifier rubyid_reviewed_movie_data'>reviewed_movie_data</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_review_data'>review_data</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_rev'>rev</span><span class='op'>|</span>
    <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='id identifier rubyid_rev'>rev</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>MovieId</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_reviewed_movie_data'>reviewed_movie_data</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_getreviewed_movie_data'><span class='object_link'><a href="Model.html#getreviewed_movie_data-instance_method" title="Model#getreviewed_movie_data (method)">getreviewed_movie_data</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_temp'>temp</span><span class='comma'>,</span> <span class='id identifier rubyid_userid'>userid</span><span class='rparen'>)</span>

  <span class='kw'>end</span>

  <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;users/index&quot;</span><span class='comma'>,</span> <span class='label'>locals:</span><span class='lbrace'>{</span><span class='label'>info:</span><span class='id identifier rubyid_user_data'>user_data</span><span class='comma'>,</span> <span class='label'>movie:</span><span class='id identifier rubyid_movie_data'>movie_data</span><span class='comma'>,</span> <span class='label'>review:</span><span class='id identifier rubyid_review_data'>review_data</span><span class='comma'>,</span> <span class='label'>movie_review:</span><span class='id identifier rubyid_reviewed_movie_data'>reviewed_movie_data</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__users__id_edit-instance_method">
  
    #<strong>GET /users/:id/edit</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Displays edit user form</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>:id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>user id</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>modelmodel#user_and_desc</li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


481
482
483
484
485</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 481</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users/:id/edit</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_user_and_desc'><span class='object_link'><a href="Model.html#user_and_desc-instance_method" title="Model#user_and_desc (method)">user_and_desc</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;users/edit&quot;</span><span class='comma'>,</span><span class='label'>locals:</span><span class='lbrace'>{</span><span class='label'>result:</span><span class='id identifier rubyid_result'>result</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__genres_show-instance_method">
  
    #<strong>POST /genres/show</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Display a genre</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>userid,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>User id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>genre_id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>genre id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>movies_with_genre,</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>All movies with genre id</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>modelmodel#get_user_review_data</li>
    
      <li>modelmodel#get_movies_with_genre</li>
    
      <li>modelmodel#get_genre_name_from_genre_id</li>
    
      <li>modelmodel#movies_with_genre</li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


395
396
397
398
399
400
401
402
403
404
405
406
407</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 395</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/genres/show</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_userid'>userid</span> <span class='op'>=</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
  <span class='id identifier rubyid_user_reviews'>user_reviews</span> <span class='op'>=</span> <span class='id identifier rubyid_get_user_review_data'><span class='object_link'><a href="Model.html#get_user_review_data-instance_method" title="Model#get_user_review_data (method)">get_user_review_data</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_userid'>userid</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_genre_id'>genre_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:genre</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>

  <span class='id identifier rubyid_movies_with_genre'><span class='object_link'><a href="Model.html#movies_with_genre-instance_method" title="Model#movies_with_genre (method)">movies_with_genre</a></span></span> <span class='op'>=</span> <span class='id identifier rubyid_get_movies_with_genre'><span class='object_link'><a href="Model.html#get_movies_with_genre-instance_method" title="Model#get_movies_with_genre (method)">get_movies_with_genre</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_genre_id'>genre_id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_genre_name'>genre_name</span> <span class='op'>=</span> <span class='id identifier rubyid_get_genre_name_from_genre_id'><span class='object_link'><a href="Model.html#get_genre_name_from_genre_id-instance_method" title="Model#get_genre_name_from_genre_id (method)">get_genre_name_from_genre_id</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_genre_id'>genre_id</span><span class='rparen'>)</span>
  
  <span class='id identifier rubyid_movies'>movies</span> <span class='op'>=</span> <span class='id identifier rubyid_movies_with_genre'><span class='object_link'><a href="Model.html#movies_with_genre-instance_method" title="Model#movies_with_genre (method)">movies_with_genre</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_movies_with_genre'><span class='object_link'><a href="Model.html#movies_with_genre-instance_method" title="Model#movies_with_genre (method)">movies_with_genre</a></span></span><span class='rparen'>)</span>

  <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;movies/show&quot;</span><span class='comma'>,</span><span class='label'>locals:</span><span class='lbrace'>{</span><span class='label'>genre:</span><span class='id identifier rubyid_genre_name'>genre_name</span><span class='comma'>,</span> <span class='label'>review:</span><span class='id identifier rubyid_user_reviews'>user_reviews</span><span class='comma'>,</span> <span class='label'>movies:</span><span class='id identifier rubyid_movies'>movies</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__login-instance_method">
  
    #<strong>POST /login</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Attemps login and updates session</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>username,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Inputed username</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>password,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Inputed password</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pwdigest,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Inputed repeted password</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>cooldown_minutes,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>cooldown minutes</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>modelmodel#get_info_user</li>
    
      <li>modelmodel#calculate_recent_attemps</li>
    
      <li>modelmodel#password_check</li>
    
      <li>modelmodel#time_allfail_user_login</li>
    
      <li>modelmodel#cooldown_timer</li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 152</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/login</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>

  <span class='id identifier rubyid_cooldown_minutes'>cooldown_minutes</span> <span class='op'>=</span> <span class='int'>5</span>
  <span class='id identifier rubyid_max_recent_attemps'>max_recent_attemps</span> <span class='op'>=</span> <span class='int'>3</span>

  <span class='id identifier rubyid_username'>username</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:username</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_password'>password</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:password</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_get_info_user'><span class='object_link'><a href="Model.html#get_info_user-instance_method" title="Model#get_info_user (method)">get_info_user</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_username'>username</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_result'>result</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_result'>result</span> <span class='op'>==</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Incorrect username or password</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_pwdigest'>pwdigest</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pwdigest</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  

  <span class='id identifier rubyid_recent_attemps'>recent_attemps</span> <span class='op'>=</span> <span class='id identifier rubyid_calculate_recent_attemps'><span class='object_link'><a href="Model.html#calculate_recent_attemps-instance_method" title="Model#calculate_recent_attemps (method)">calculate_recent_attemps</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_cooldown_minutes'>cooldown_minutes</span><span class='rparen'>)</span>


  <span class='kw'>if</span> <span class='id identifier rubyid_recent_attemps'>recent_attemps</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_max_recent_attemps'>max_recent_attemps</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_password_check'><span class='object_link'><a href="Model.html#password_check-instance_method" title="Model#password_check (method)">password_check</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_pwdigest'>pwdigest</span><span class='comma'>,</span><span class='id identifier rubyid_password'>password</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_id'>id</span>
      <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>nil</span>
      <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/movies</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

    <span class='kw'>else</span>
      <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Incorrect username or password</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_time_allfail_user_login'><span class='object_link'><a href="Model.html#time_allfail_user_login-instance_method" title="Model#time_allfail_user_login (method)">time_allfail_user_login</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>

  <span class='kw'>else</span>
    <span class='id identifier rubyid_cooldown_timer'><span class='object_link'><a href="Model.html#cooldown_timer-instance_method" title="Model#cooldown_timer (method)">cooldown_timer</a></span></span> <span class='op'>=</span> <span class='id identifier rubyid_cooldown_timer'><span class='object_link'><a href="Model.html#cooldown_timer-instance_method" title="Model#cooldown_timer (method)">cooldown_timer</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_cooldown_minutes'>cooldown_minutes</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Inputed to many incorrect username or password, try again in </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_cooldown_timer'><span class='object_link'><a href="Model.html#cooldown_timer-instance_method" title="Model#cooldown_timer (method)">cooldown_timer</a></span></span><span class='period'>.</span><span class='id identifier rubyid_round'>round</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> minutes</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__movie_new-instance_method">
  
    #<strong>POST /movie/new</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Creates movie</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>allgenre,</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>All available genres</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>org_filename,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>img filename</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>movie_name,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>movies name</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>desc,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>movie description</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>dbpath,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>path to img string in database</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>user_id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>User id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>genres_that_are_checked,</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>all genres clicked in checkbox</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>movieid,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Movie id</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>modelmodel#get_genres</li>
    
      <li>modelmodel#genres_that_are_checked</li>
    
      <li>modelmodel#search_file_ending</li>
    
      <li>modelmodel#add_movie</li>
    
      <li>modelmodel#get_movieid_from_user_id_and_movie_name</li>
    
      <li>modelmodel#add_genres_to_movie</li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 307</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/movie/new</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_movie_name'>movie_name</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:movie_name</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_user_id'>user_id</span> <span class='op'>=</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span>  
  <span class='id identifier rubyid_desc'>desc</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:description</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_genres'>genres</span> <span class='op'>=</span> <span class='id identifier rubyid_get_genres'><span class='object_link'><a href="Model.html#get_genres-instance_method" title="Model#get_genres (method)">get_genres</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_allgenre'>allgenre</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_allgenre'>allgenre</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>action</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:action</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_allgenre'>allgenre</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>horror</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:horror</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_allgenre'>allgenre</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>drama</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:drama</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_allgenre'>allgenre</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>romance</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:romance</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_allgenre'>allgenre</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>comedy</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:comedy</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_allgenre'>allgenre</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>science_fiction</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:sciencefiction</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_genres_that_are_checked'><span class='object_link'><a href="Model.html#genres_that_are_checked-instance_method" title="Model#genres_that_are_checked (method)">genres_that_are_checked</a></span></span> <span class='op'>=</span> <span class='id identifier rubyid_genres_that_are_checked'><span class='object_link'><a href="Model.html#genres_that_are_checked-instance_method" title="Model#genres_that_are_checked (method)">genres_that_are_checked</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_allgenre'>allgenre</span><span class='rparen'>)</span>


  <span class='id identifier rubyid_org_filename'>org_filename</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:file</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:filename</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_file_ending'>file_ending</span> <span class='op'>=</span> <span class='id identifier rubyid_search_file_ending'><span class='object_link'><a href="Model.html#search_file_ending-instance_method" title="Model#search_file_ending (method)">search_file_ending</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_org_filename'>org_filename</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_filename'>filename</span> <span class='op'>=</span> <span class='const'>SecureRandom</span><span class='period'>.</span><span class='id identifier rubyid_uuid'>uuid</span> <span class='op'>+</span> <span class='id identifier rubyid_file_ending'>file_ending</span> 
  <span class='id identifier rubyid_save_path'>save_path</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>./public/img/uploaded_pictures/</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_filename'>filename</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_dbpath'>dbpath</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/img/uploaded_pictures/</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_filename'>filename</span><span class='rparen'>)</span>

  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_cp'>cp</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:file</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:tempfile</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>./public/img/uploaded_pictures/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_filename'>filename</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_add_movie'><span class='object_link'><a href="Model.html#add_movie-instance_method" title="Model#add_movie (method)">add_movie</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_movie_name'>movie_name</span><span class='comma'>,</span> <span class='id identifier rubyid_desc'>desc</span><span class='comma'>,</span> <span class='id identifier rubyid_dbpath'>dbpath</span><span class='comma'>,</span> <span class='id identifier rubyid_user_id'>user_id</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_movieid'>movieid</span> <span class='op'>=</span> <span class='id identifier rubyid_get_movieid_from_user_id_and_movie_name'><span class='object_link'><a href="Model.html#get_movieid_from_user_id_and_movie_name-instance_method" title="Model#get_movieid_from_user_id_and_movie_name (method)">get_movieid_from_user_id_and_movie_name</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_movie_name'>movie_name</span><span class='comma'>,</span><span class='id identifier rubyid_user_id'>user_id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_add_genres_to_movie'><span class='object_link'><a href="Model.html#add_genres_to_movie-instance_method" title="Model#add_genres_to_movie (method)">add_genres_to_movie</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_genres_that_are_checked'><span class='object_link'><a href="Model.html#genres_that_are_checked-instance_method" title="Model#genres_that_are_checked (method)">genres_that_are_checked</a></span></span><span class='comma'>,</span> <span class='id identifier rubyid_movieid'>movieid</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/users</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__movies__id_delete-instance_method">
  
    #<strong>POST /movies/:id/delete</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>delete existing movie and redirects to user</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>:id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>movie id</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>modelmodel#delete_movie</li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


427
428
429
430
431</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 427</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/movies/:id/delete</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
  <span class='id identifier rubyid_delete_movie'><span class='object_link'><a href="Model.html#delete_movie-instance_method" title="Model#delete_movie (method)">delete_movie</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__movies__id_edit-instance_method">
  
    #<strong>POST /movies/:id/edit</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Edits movie redirecting to users</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>allgenre,</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>All available genres</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>org_filename,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>img filename</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>titel,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Movie title</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>desc,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Movie description</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>dbpath,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>path to img string in database</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>:id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>movie id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>genres_that_are_checked,</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>all genres clicked in checkbox</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>modelmodel#get_genres</li>
    
      <li>modelmodel#genres_that_are_checked</li>
    
      <li>modelmodel#delete_movie_img</li>
    
      <li>modelmodel#search_file_ending</li>
    
      <li>modelmodel#update_dbpath</li>
    
      <li>modelmodel#update_movie</li>
    
      <li>modelmodel#edit_genres_to_movie</li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 518</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/movies/:id/edit</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
  <span class='id identifier rubyid_title'>title</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:titel</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_desc'>desc</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:desc</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_genres'>genres</span> <span class='op'>=</span> <span class='id identifier rubyid_get_genres'><span class='object_link'><a href="Model.html#get_genres-instance_method" title="Model#get_genres (method)">get_genres</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_allgenre'>allgenre</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_allgenre'>allgenre</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>action</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:action</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_allgenre'>allgenre</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>horror</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:horror</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_allgenre'>allgenre</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>drama</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:drama</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_allgenre'>allgenre</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>romance</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:romance</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_allgenre'>allgenre</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>comedy</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:comedy</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_allgenre'>allgenre</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>science_fiction</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:sciencefiction</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_genres_that_are_checked'><span class='object_link'><a href="Model.html#genres_that_are_checked-instance_method" title="Model#genres_that_are_checked (method)">genres_that_are_checked</a></span></span> <span class='op'>=</span> <span class='id identifier rubyid_genres_that_are_checked'><span class='object_link'><a href="Model.html#genres_that_are_checked-instance_method" title="Model#genres_that_are_checked (method)">genres_that_are_checked</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_allgenre'>allgenre</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:file</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_delete_movie_img'><span class='object_link'><a href="Model.html#delete_movie_img-instance_method" title="Model#delete_movie_img (method)">delete_movie_img</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_org_filename'>org_filename</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:file</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:filename</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_file_ending'>file_ending</span> <span class='op'>=</span> <span class='id identifier rubyid_search_file_ending'><span class='object_link'><a href="Model.html#search_file_ending-instance_method" title="Model#search_file_ending (method)">search_file_ending</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_org_filename'>org_filename</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_filename'>filename</span> <span class='op'>=</span> <span class='const'>SecureRandom</span><span class='period'>.</span><span class='id identifier rubyid_uuid'>uuid</span> <span class='op'>+</span> <span class='id identifier rubyid_file_ending'>file_ending</span> 
    <span class='id identifier rubyid_save_path'>save_path</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>./public/img/uploaded_pictures/</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_filename'>filename</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_dbpath'>dbpath</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/img/uploaded_pictures/</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_filename'>filename</span><span class='rparen'>)</span>

    <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_cp'>cp</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:file</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:tempfile</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>./public/img/uploaded_pictures/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_filename'>filename</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_update_dbpath'><span class='object_link'><a href="Model.html#update_dbpath-instance_method" title="Model#update_dbpath (method)">update_dbpath</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_dbpath'>dbpath</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_update_movie'><span class='object_link'><a href="Model.html#update_movie-instance_method" title="Model#update_movie (method)">update_movie</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_title'>title</span><span class='comma'>,</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span><span class='id identifier rubyid_desc'>desc</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_edit_genres_to_movie'><span class='object_link'><a href="Model.html#edit_genres_to_movie-instance_method" title="Model#edit_genres_to_movie (method)">edit_genres_to_movie</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_genres_that_are_checked'><span class='object_link'><a href="Model.html#genres_that_are_checked-instance_method" title="Model#genres_that_are_checked (method)">genres_that_are_checked</a></span></span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__reviews-instance_method">
  
    #<strong>POST /reviews</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Creats review</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>title,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Review titel</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>desc,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>review description</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>rating,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>review rating</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>movieId,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Movie id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>user_id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>User id</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>modelmodel#create_review</li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


372
373
374
375
376
377
378
379
380
381
382</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 372</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/reviews</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_title'>title</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:review_name</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_desc'>desc</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:description</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_rating'>rating</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:rating</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>

  <span class='id identifier rubyid_movieId'>movieId</span> <span class='op'>=</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:movieId</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_user_id'>user_id</span> <span class='op'>=</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span> 
  <span class='id identifier rubyid_time'>time</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
  <span class='id identifier rubyid_create_review'><span class='object_link'><a href="Model.html#create_review-instance_method" title="Model#create_review (method)">create_review</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_title'>title</span><span class='comma'>,</span> <span class='id identifier rubyid_desc'>desc</span><span class='comma'>,</span> <span class='id identifier rubyid_rating'>rating</span><span class='comma'>,</span> <span class='id identifier rubyid_movieId'>movieId</span><span class='comma'>,</span> <span class='id identifier rubyid_user_id'>user_id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__reviews__id_delete-instance_method">
  
    #<strong>POST /reviews/:id/delete</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>delete existing review and redirects to user</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>:id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>review id</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>modelmodel#delete_review</li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


415
416
417
418
419</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 415</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/reviews/:id/delete</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
  <span class='id identifier rubyid_delete_review'><span class='object_link'><a href="Model.html#delete_review-instance_method" title="Model#delete_review (method)">delete_review</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__reviews__id_edit-instance_method">
  
    #<strong>POST /reviews/:id/edit</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Edits review and redirects to user</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>review id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>titel,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>review title</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>desc,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>review description</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>rating,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>review rating</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>modelmodel#update_review</li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


561
562
563
564
565
566
567
568
569</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 561</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/reviews/:id/edit</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
  <span class='id identifier rubyid_titel'>titel</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:titel</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_desc'>desc</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:desc</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_rating'>rating</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:rating</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_update_review'><span class='object_link'><a href="Model.html#update_review-instance_method" title="Model#update_review (method)">update_review</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span><span class='id identifier rubyid_titel'>titel</span><span class='comma'>,</span><span class='id identifier rubyid_desc'>desc</span><span class='comma'>,</span><span class='id identifier rubyid_rating'>rating</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__users__id_delete-instance_method">
  
    #<strong>POST /users/:id/delete</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>delete existing user and redirects to login or if admin to admin panel</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>:id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>user id</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>modelmodel#delete_user</li>
    
      <li>modelmodel#get_admin_from_user</li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


440
441
442
443
444
445
446
447
448</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 440</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users/:id/delete</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
  <span class='id identifier rubyid_delete_user'><span class='object_link'><a href="Model.html#delete_user-instance_method" title="Model#delete_user (method)">delete_user</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_get_admin_info_from_user'><span class='object_link'><a href="Model.html#get_admin_info_from_user-instance_method" title="Model#get_admin_info_from_user (method)">get_admin_info_from_user</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>true</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/admin</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__users__id_edit-instance_method">
  
    #<strong>POST /users/:id/edit</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Edits user and redirects to user</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>user id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>username,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>username</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>desc,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>users description</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>modelmodel#update_user</li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


580
581
582
583
584
585
586
587</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 580</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users/:id/edit</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
  <span class='id identifier rubyid_username'>username</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:username</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_desc'>desc</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:desc</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_update_user'><span class='object_link'><a href="Model.html#update_user-instance_method" title="Model#update_user (method)">update_user</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span><span class='id identifier rubyid_username'>username</span><span class='comma'>,</span><span class='id identifier rubyid_desc'>desc</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__users_new-instance_method">
  
    #<strong>POST /users/new</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Creates a new user</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>username,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Username</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>password,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Password</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>confirm_password,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>repeted password</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>admin,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>admin rights</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>modelmodel#id_from_user</li>
    
      <li>modelmodel#create_user</li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 234</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/users/new</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> 
  <span class='id identifier rubyid_username'>username</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:username</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_password'>password</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:password</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_confirm_password'>confirm_password</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:confirm_password</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_admin'>admin</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>false</span><span class='tstring_end'>&quot;</span></span>

  <span class='comment'>#validering att det finns input
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_username'>username</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_password'>password</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>

    <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='id identifier rubyid_id_from_user'><span class='object_link'><a href="Model.html#id_from_user-instance_method" title="Model#id_from_user (method)">id_from_user</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_username'>username</span><span class='rparen'>)</span>
    
    <span class='kw'>if</span> <span class='id identifier rubyid_temp'>temp</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
      <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_password'>password</span> <span class='op'>==</span> <span class='id identifier rubyid_confirm_password'>confirm_password</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_password_digest'>password_digest</span> <span class='op'>=</span> <span class='id identifier rubyid_create_user'><span class='object_link'><a href="Model.html#create_user-instance_method" title="Model#create_user (method)">create_user</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_username'>username</span><span class='comma'>,</span><span class='id identifier rubyid_password'>password</span><span class='comma'>,</span><span class='id identifier rubyid_admin'>admin</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>nil</span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

      <span class='kw'>else</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:create_error</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Passwords didn&#39;t match</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/showregister</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    
    <span class='kw'>else</span>
      <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:create_error</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Username already exist</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/showregister</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>

  <span class='kw'>else</span>
    <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:create_error</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Input username and password</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/showregister</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Thu May 20 10:43:59 2021 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.26 (ruby-2.7.2).
</div>

    </div>
  </body>
</html>